(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon","ScriptCommon",135],{"/zJj":function(e,t,n){n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d}));const r=1016,a=508,o=40,i=48,s=72,c=740,l=60,d={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("mVx/"),a=n.n(r);const o=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),i=e=>{const t=a()(e,e=>!o(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),r=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return r?decodeURIComponent(r[1]):""})(t):""}},"1vym":function(e,t,n){},"6tKR":function(e,t,n){n.r(t);var r=n("IUnB"),a=n.n(r);const o={ready:function(e,t){a.a.ready(e,t)},load:function(e,t,n){o.ready(e,()=>{0===t.lastIndexOf("//",0)&&(t=window.location.protocol+t),a()(t,n)})},done:function(e){a.a.done(e)}};t.default=o},"7jH2":function(e,t,n){var r=n("/zJj");var a=({imgSrc:e,isGif:t,pin:n,showCloseupContentRight:a,viewportSize:o})=>{const i=y(Object(S.a)({pin:n})),{image564x:s={}}=g(i)||{},{imageOrig:c={}}=_(i)||{},l=0===Object.keys(s).length?c:s,d=l.height,u=l.width,{image236x:h={}}=f(y(Object(S.a)({pin:n})))||{},p=h.url,m=Math.max(Math.min(u,r.e),60),b=m/u*d;return{alt:n.description,src:t?e:p,naturalHeight:b,naturalWidth:m}},o=n("Nle8");function i(e){return!e.is_promoted}var s=e=>{const t=(e||[]).reduce((e,t)=>t.name?e.concat({name:t.name}):e,[]);return t.length>0?t:null};function c(e){if(e&&e.pin){const t=e.pin.rich_metadata;if(t)return t.products?144:t.article?141:t.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140}var l=n("pOug");var d=Object(l.a)(e=>{const{richMetadata:t}=e,{article:n}=t,{name:r,description:a,authors:o,date_published:i}=n||{};return r?{...e,article:{name:r,description:a,authors:s(o),datePublished:i&&new Date(i)||void 0}}:null});var u=Object(l.a)(e=>{const{attribution:t}=e.pin,{author_url:n,url:r,author_name:a,title:o,provider_name:i,cc_url:s,embed:c}=t||{};return i&&r?{...e,attribution:{providerUrl:r,providerName:i,title:o,authorUrl:n,authorName:a,ccUrl:s,embed:c}}:null});var h=Object(l.a)(e=>{const{categorizedIngredients:t}=e.recipe;return t&&t.length>0?{...e,categorizedIngredients:t}:null});var p=Object(l.a)(e=>{const{display_name:t}=e.richSummary;return t?{...e,displayName:t}:null});const m=e=>t=>{const{images:n}=t,r=n[e],{url:a,width:o,height:i}=r||{};return a&&o&&i?{url:a,width:o,height:i}:null},f=Object(l.a)(e=>{const t=m("236x")(e);return t&&{...e,image236x:t}}),g=Object(l.a)(e=>{const t=m("564x")(e);return t&&{...e,image564x:t}}),b=Object(l.a)(e=>{const t=m("736x")(e);return t&&{...e,image736x:t}});var _=Object(l.a)(e=>{const{images:t}=e,n=t.orig,{url:r,width:a,height:o}=n||{};return r&&a&&o?{...e,imageOrig:{url:r,width:a,height:o}}:null});var v=Object(l.a)(e=>{const{embed:t}=e.pin,{type:n,src:r,subtype:a}=t||{},{attribution:o={}}=u(e)||{},{embed:i={}}=o,{src:s}=i,c=r||s;return c?{...e,embed:{type:n,src:c,subtype:a}}:null});var y=Object(l.a)(e=>{const{pin:t}=e,{images:n}=t,r=Object.keys(n||{}).reduce((e,t)=>{const r=n[t],{url:a,width:o,height:i}=r;return e&&a&&o&&i?{...e,[t]:{url:a,width:o,height:i}}:null},{});return r&&Object.keys(r).length>0?{...e,images:r}:null});var E=Object(l.a)(e=>{const{pin:t}=e,{tracked_link:n,link:r}=t,a=n||r;return a?{...e,link:a}:null}),S=n("O1y+");var w=Object(l.a)(e=>{const{pin:t}=e,{aggregated_pin_data:n}=t,{pin_tags:r}=n||{};return r?{...e,pinTags:r}:null});var C=Object(l.a)(e=>{const{pin:t,richMetadata:n}=e,{buyable_availability:r}=t,{products:a}=n,o=Array.isArray(a)?a.map(e=>{const{name:t,offer_summary:n}=e,{in_stock:a,min_price:o,max_price:i,price:s}=n||{};let c=null;return void 0!==o&&void 0!==i?c=`${o} - ${i}`:void 0!==s&&(c=`${s}`),t?{name:t,outOfStock:!1===r||!1===a,priceText:c}:null}).filter(e=>null!==e):[];return o.length>0?{...e,products:{first:o[0],rest:o.slice(1)}}:null}),I=n("PsyL");const k=e=>{const{h:t,m:n}=e||{},r={hours:t||0,minutes:n||0};return void 0!==t||void 0!==n?{h:t,m:n,time:r,isoDuration:Object(I.a)(r)}:null};var O=Object(l.a)(e=>{const{richMetadata:t}=e,{recipe:n}=t,{name:r,categorized_ingredients:a,diets:o,from_aggregated_data:i,cook_times:s,servings_summary:c}=n||{},{total:l,cook:d,prep:u}=s||{},{summary:h}=c||{},p=k(u),m=k(d),f=k(l);return r?{...e,recipe:{name:r,categorizedIngredients:a,diets:o,fromAggregatedData:i,prepTime:p,cookTime:m,totalTime:f,servingSummary:h}}:null});var x=Object(l.a)(e=>{const{rich_metadata:t}=e.pin;return t?{...e,richMetadata:t}:null});var B=Object(l.a)(e=>{const{rich_summary:t}=e.pin;return t?{...e,richSummary:t}:null});var R=Object(l.a)(e=>{const{title:t}=e.richMetadata;return t?{...e,title:t}:null});var T=Object(l.a)(e=>{const{pin:t,inChangeTitlesExp:n}=e,{carousel_data:r,title:a,closeup_unified_title:o}=t;let i=n?o:a;if(r){const{carousel_slots:e=[],index:t}=r;e[t]&&e[t].title&&(i=e[t].title)}return i?{...e,title:i}:null});var j=Object(l.a)(e=>{const{richMetadata:t}=e,{tutorial:n}=t,{name:r,description:a,from_aggregated_data:o}=n||{};return n&&r?{...e,tutorial:{name:r,description:a,fromAggregatedData:o}}:null});const D=e=>{const{thumbnail:t,url:n,width:r,height:a,duration:o}=e||{};return t&&n&&r&&a&&{thumbnail:t,url:n,width:r,height:a,duration:o}||void 0};var L=Object(l.a)(e=>{const{videos:t}=e.pin,{id:n,video_list:r={}}=t||{},{V_720P:a,V_HLSV4:o,V_HLSV3_MOBILE:i}=r,s=D(o),c=D(i),l=D(a),d=l||s||c;return n&&d?{...e,video:{id:n,hasVideo:d,mp4:l||void 0,hls:s||void 0,hlsv3:c||void 0}}:null});Object(l.a)(e=>{const{pin:t}=e,{visual_objects:n}=t;return n?{...e,visualObjects:n}:null});var P=e=>{const{hlsv3:t,hls:n}=e,r=t||n;return!!r&&r.width>r.height},A=(...e)=>{},M=n("VpfY"),N=({viewer:e,pin:t,boardCount:n})=>(!t.content_sensitivity||!t.content_sensitivity.is_sensitive_content)&&(!Object(M.h)({viewer:e,pin:t})&&void 0!==n&&n>=2),F=n("Zygf"),U=e=>!(e&&e.pinner&&e.pinner.blocked_by_me||e&&Object(F.a)(e));n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o.a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return _})),n.d(t,"i",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return S.a})),n.d(t,"q",(function(){return w})),n.d(t,"r",(function(){return C})),n.d(t,"s",(function(){return O})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return B})),n.d(t,"v",(function(){return R})),n.d(t,"w",(function(){return T})),n.d(t,"x",(function(){return j})),n.d(t,"y",(function(){return L})),n.d(t,"z",(function(){return P})),n.d(t,"A",(function(){return A})),n.d(t,"B",(function(){return N})),n.d(t,"C",(function(){return U}))},"7vSn":function(e,t,n){},"8BHY":function(e,t,n){var r=n("q1tI"),a=n.n(r);const o={backgroundColor:"rgba(0, 0, 0, .06)"},i={backgroundColor:"rgba(51, 51, 51, 1.0)"},s={backgroundColor:"rgba(255, 255, 255, 1.0)"},c={backgroundColor:"rgba(239, 239, 239, 1.0)"},l={backgroundColor:"rgba(142 ,142, 142, 1.0)"},d={backgroundColor:"rgba(230, 0, 35, 1.0)"};var u={transparent:{backgroundColor:"transparent"},transparentDarkGray:{backgroundColor:"rgba(51, 51, 51, .8)"},transparentHovered:o,transparentFocused:o,transparentActive:{backgroundColor:"rgba(0, 0, 0, .1)"},transparentDarkGrayHovered:i,transparentDarkGrayFocused:i,transparentDarkGrayActive:{backgroundColor:"rgba(51, 51, 51, 1.0)"},white:{backgroundColor:"rgba(255, 255, 255, .9)"},whiteHovered:s,whiteFocused:s,whiteActive:{backgroundColor:"rgba(255, 255, 255, 1.0)"},lightGray:{backgroundColor:"rgba(239, 239, 239, .9)"},lightGrayHovered:c,lightGrayFocused:c,lightGrayActive:{backgroundColor:"rgba(239, 239, 239, 1.0)"},gray:{color:"rgba(142 ,142, 142, .9)"},grayHovered:l,grayFocused:l,grayActive:{backgroundColor:"rgba(142 ,142, 142, 1.0)"},red:{backgroundColor:"rgba(230, 0, 35, .9)"},redActive:d,redFocused:d,redHovered:d},h=n("n6mq");const p={xs:24,sm:32,md:40,lg:48,xl:56},m={alignItems:"center",borderRadius:"50%",display:"flex",justifyContent:"center"},f={boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)",outline:0},g={transparent:"gray",gray:"white",lightGray:"gray",white:"gray",transparentDarkGray:"white",red:"white"};function b(e){const{active:t=!1,bgColor:n="transparent",focused:r=!1,hovered:o=!1,icon:i,iconColor:s=g[n],size:c="md",title:l=""}=e,d=e.iconSize||p[c]/2,b={height:p[c],width:p[c]},_={...m,...u[n],...t?u[`${n}Active`]:{},...r?f:{},...r?u[`${n}Focused`]:{},...!o||r||t?{}:u[`${n}Active`]};return a.a.createElement("div",{style:{...b,..._}},a.a.createElement(h.c,{shape:"circle"},a.a.createElement(h.n,{accessibilityLabel:"",color:s,icon:i,size:d,title:l})))}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return v}));class v extends a.a.Component{constructor(...e){super(...e),_(this,"state",{active:!1,focused:!1,hovered:!1}),_(this,"handleBlur",()=>this.setState({focused:!1})),_(this,"handleFocus",()=>{this.setState({focused:!0})}),_(this,"handleMouseDown",()=>{this.setState({active:!0})}),_(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),_(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),_(this,"handleMouseUp",()=>{this.setState({active:!1})})}render(){const{accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,bgColor:r,disabled:o,icon:i,iconColor:s,iconSize:c,onClick:l,size:d,wrappingPogStyle:u}=this.props,{active:h,focused:p,hovered:m}=this.state;return a.a.createElement("button",{"aria-expanded":e,"aria-haspopup":t,"aria-label":n,className:"LegoGestalt_IconButton",disabled:o,onBlur:this.handleBlur,onClick:e=>l&&l({event:e}),onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,title:n,type:"button"},a.a.createElement("div",{style:{...u||{}}},a.a.createElement(b,{active:h,bgColor:r,focused:p,hovered:m,icon:i,iconColor:s,iconSize:c,size:d,title:n})))}}},AHhP:function(e,t){const n={},r=function(e,t){let n=!1;return function(...r){n||(n=!0,e.apply(this,r),t&&t())}},a=function(e,t){e.__listeners=t},o=function(e,t){return!e.__listeners&&t&&a(e,[]),e.__listeners},i=function(e,t){return!e.__handlers&&t&&(e.__handlers={}),e.__handlers},s=function e(t,n,r){let a,o,i=[];if("string"==typeof t)for(a=t.split(" "),o=0;o<a.length;o+=1)i.push({name:a[o],callback:n,originalCallback:n,context:r});else"object"==typeof t&&t&&Object.keys(t).forEach(a=>{i=i.concat(e(a,t[a],r||n))});return i},c=function(e,t,n,r){const a=s(e,t,n);for(let o=0;o<a.length;o+=1)r(a[o])},l=function(e,t){const n=i(e,!0);void 0===n[t.name]?n[t.name]=[t]:n[t.name].push(t)},d=function(e,t,n){const r=o(e,!0);for(let a=0;a<n.length;a+=1){const e=n[a];if(!e.callback)return;l(t,e),r.push({obj:t,event:e,originalCallback:e.originalCallback})}};n.on=function(e,t,n){return c(e,t,n,e=>{e.callback&&l(this,e)}),this},n.off=function(e,t,n){const r=i(this,!1);if(void 0===r)return this;const a=Object.keys(r);let o=s(e,t,n);0===o.length&&(o=[{name:null,callback:t,context:n}]);for(let i=0;i<o.length;i+=1){const e=o[i];let t;t=e.name?[e.name]:a;for(let n=0;n<t.length;n+=1){const a=t[n],o=r[a];if(void 0!==o){const t=[];for(let n=0;n<o.length;n+=1){const r=o[n];e.callback&&r.originalCallback!==e.callback&&r.callback!==e.callback?t.push(r):e.context&&r.context!==e.context&&t.push(r)}r[a]=t}}}return this},n.trigger=function(e,...t){const n=i(this,!1);if(void 0===n)return this;let r,a,o;const s=e.split(" ");for(r=0;r<s.length;r+=1){let e=[];const i=n.all,c=s[r],l=n[c];if(void 0!==l)for(a=0;a<l.length;a+=1)if("function"==typeof(o=l[a]).callback)e.push({fn:o.callback,context:o.context||this,args:t});else if(o.callback)throw new Error("Callbacks must be functions");if(void 0!==i)for(a=0;a<i.length;a+=1)if("function"==typeof(o=i[a]).callback)e.push({fn:o.callback,context:o.context||this,args:[c].concat(t)});else if(o.callback)throw new Error("Callbacks must be functions");for(a=0;a<e.length;a+=1)(o=e[a]).fn.apply(o.context,o.args);e=[]}return this},n.once=function(e,t,n){return c(e,t,n,e=>{"function"==typeof e.originalCallback&&(e.callback=r(e.originalCallback,()=>{this.off(e.name,e.callback,e.context)}),l(this,e))}),this},n.listenTo=function(e,t,n){return d(this,e,s(t,n,this)),this},n.listenToOnce=function(e,t,n){const a=s(t,n,this).map(t=>(t.originalCallback&&(t.callback=r(t.originalCallback,()=>{this.stopListening(e,t.name,t.originalCallback,t.context)})),t));return d(this,e,a),this},n.stopListening=function(e,t,n){const r=o(this,!1);let i,c,l;if(!r)return this;const d=[],u=void 0===t?void 0:s(t,n,this);for(c=0;c<r.length;c+=1)if((i=r[c]).obj!==e&&e)d.push(i);else if(t){let e=!1;for(l=0;l<u.length&&!1===e;l+=1){const t=u[l];i.event.name===t.name&&i.originalCallback===t.callback&&(e=!0)}e?i.obj.off(i.event.name,i.event.callback,i.event.context):d.push(i)}else i.obj.off(i.event.name,i.event.callback,i.event.context);return a(this,d),this},e.exports=n},Ep0g:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));const r=["AU","CA","GB","IE","NZ","US","FR","DE","AT","IT","ES","NL","BE","PT","CH","NL","BE","PT","CH","SE","NO","DK","FI"],a=["US","GB","IE","NZ","AU","CA","FR","DE","AT","IT","ES","NL","BE","PT","CH","DK","SE","NO","FI"],o=e=>r.includes(e.toUpperCase()),i=e=>a.includes(e.toUpperCase()),s=e=>e.reduce((e,t)=>(e||0)+(t||0),0),c=(e,t,n)=>{const r={numDays:n};return t.forEach(t=>{if(e[t].length>=2*n){const a=s(e[t].slice(0,n)),o=s(e[t].slice(-n));r[t]={total:o,trend:a?(o-a)/a:0}}}),r}},EuRG:function(e,t,n){function r(e,t){return{type:"SEARCH_BOARD_CREATED",payload:{boardId:e,query:t}}}function a(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function i(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}))},Ev07:function(e,t,n){var r=n("m2Wt"),a=n("h4v/"),o=n("1inl"),i=n("UTsl"),s=n("LqyK"),c=n("4dcN"),l=n("Ye/N"),d=n("BlMG"),u=n("mBfy");const h={checkFbTimelinePermission:function(e){i.default.ensureInit((function(t){t.api("/me/permissions",t=>{const n=t.data;let r=!1;if(n){r=!!n.find(e=>"publish_actions"===e.permission&&"granted"===e.status)}r?e.success&&e.success():e.error&&e.error()})}),u.default)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){i.default.ensureInit(n=>{if(!h.fbConnectedAccountMatchesLoggedInAccount(n,t))return o.a.showError(l.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());h.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){h.fbLogin(e)}})},u.default)},fbLogin:function(e){i.default.ensureInit(t=>{t.login(t=>{t.authResponse?h.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},u.default)},shareFb:function(e){const t=e.ga_category||"share_facebook";c.a.trackEvent(t,"click");const n=e.dialog_options||{};n.callback=function(){const t=r.a.fromEventType(1300);e.object_id&&t.setObjectIdStr(e.object_id),a.a.getInstance().addEvent(t)};const o=n.object_type;o&&Object(d.a)("facebook_share_dialog_open_"+o),s.default.open(n)},getLocaleString:function(e){let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US";break;case"es_419":case"es_AR":t="es_LA"}return t}};t.a=h},"G35+":function(e,t,n){var r=n("AHhP"),a=n.n(r),o=n("1inl"),i=n("fZ0m"),s=n("Ye/N"),c=n("kmwA"),l=n("BlMG");const d={scope:"profile email",client_id:c.a.settings.GPLUS_CLIENT_ID,app_package_name:c.a.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},u=e=>(Object(l.a)("unauth_web.gapi_auth2_load.success"),e()),h=e=>{Object(l.a)(`unauth_web.init_google.sdk.${e}`)};var p=()=>new Promise((e,t)=>{h("start"),window.gapi.auth2?(h("exists"),window.gapi.auth2.init(d).then(()=>u(e))):(h("load"),window.gapi.load("auth2",{callback:()=>{h("load_success"),window.gapi.auth2.init(d).then(()=>u(e))},onerror:()=>{h("load_error"),t()},timeout:15e3,ontimeout:()=>{h("load_timeout"),t()}}))}),m=n("dwea"),f=n("mBfy");function g(){}let b;Object.assign(g.prototype,a.a),Object.assign(g.prototype,{connect(e,t){t=Object.assign({},{success(){},error(){},complete(){}},t),Object(l.e)(`auth_web.social_connect.${e}`),t.rerequest_facebook_email?(()=>Promise.resolve().then(n.bind(null,"UTsl")))().then(({default:e})=>{e.ensureInit(e=>{e.login(e=>{const n=e.authResponse;let r,a;n&&(r=(r=n.grantedScopes)?r.split(","):[],a=n.userID);const o=r.find(e=>"email"===e),i={id:a};"connected"===e.status&&o?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},f.default)}):"gplus"===e||"google"===e?i.a.get(e=>{p().then(()=>{e.auth2.getAuthInstance().grantOfflineAccess().then(e=>{t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(e=>{t.error(e)})})}):(()=>Promise.resolve().then(n.bind(null,"LqyK")))().then(({default:n})=>{const r=t.windowOptions||n.getWindowOptions(),a=window.open("/connect/"+e+"/","",r);if(!a)return o.a.showError(s.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const i=m.a.setInterval(()=>{a.closed&&(clearInterval(i),this.handleComplete({network:e,error_message:"Window closed."}))},1e3);this.once("connect:"+e,e=>{clearInterval(i),e.error_message?t.error(e):t.success(e),t.complete()})})},complete(e){this.handleComplete(e)},handleComplete(e){const t="connect:"+e.network;if("facebook"===e.network){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(g,{instance:()=>(b||(b=new g),b),FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy",DROPBOX:"dropbox"}),window.addEventListener("message",e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&g.instance().complete(e.data)});t.a=g},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return r}));const r=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IUnB:function(e,t){var n="undefined"==typeof window?null:window.document,r=n?n.getElementsByTagName("head")[0]:null,a=/^https?:\/\//,o={},i={},s={},c="",l={},d=!1,u="push",h="onreadystatechangeName";function p(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return d;return!0}function m(e,t){return p(e,(function(e){return!t(e)})),d}function f(e,t,n){e=e[u]?e:[e];var r=t&&"function"==typeof t,d=r?t:n,h=r?e.join(""):t,b=e.length;function _(e){return e.call?e():o[e]}function v(){if(!--b){if(o[h]=1,d)d();for(var e in s)p(e.split("|"),_)&&!m(s[e],_)&&(s[e]=[])}}return setTimeout((function(){m(e,(function(e){return null===e?v():l[e]?(h&&(i[h]=1),2==l[e]&&v()):(l[e]=1,h&&(i[h]=1),void g(!a.test(e)&&c?c+e+".js":e,v))}))}),0),f}function g(e,t){var a=!1,o=function(e,t){a||("loaded"===e.readyState||"completed"===e.readyState?t():setTimeout((function(){o(e,t)}),100))},i=n.createElement("script"),s=i.onload=i.onerror=i[h]=function(){a||(a=!0,i.readyState&&!/^c|loade/.test(i.readyState)||(i.onload=i[h]=null,1,l[e]=2,t()))};o(i,s),i.async=1,i.src=e,r.insertBefore(i,r.firstChild)}n&&!n.readyState&&n.addEventListenerName&&(n.addEventListenerName("DOMContentLoaded",(function e(){n.removeEventListener("DOMContentLoaded",e,d),n.readyState="complete"}),d),n.readyState="loading"),f.get=g,f.order=function(e,t,n){!function r(){var a=e.shift();e.length?f(a,r):f(a,t,n)}()},f.path=function(e){c=e},f.ready=function(e,t,n){e=e[u]?e:[e];var r,a=[];return!m(e,(function(e){o[e]||a.push(e)}))&&p(e,(function(e){return o[e]}))?t():(r=e.join("|"),s[r]||(s[r]=[]),s[r][u](t),n&&n(a)),f},f.done=function(e){f([null],e)},e.exports=f},LeWa:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));n("q1tI");var r=n("QkVN"),a=n.n(r);const o={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},i={blockIds:[],canvasJson:null,description:"",descriptionError:null,linkBlock:o,linkError:null,media:null,signals:{},title:"",titleError:null};t.a=(e=i,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":{const{pinItem:n}=t.payload;return{...e,...n}}case"STORY_PIN_ITEM_SET_DESCRIPTION":{const{description:n}=t.payload;return{...e,description:n}}case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:n}=t.payload;return{...e,descriptionError:n}}case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const{linkBlock:n}=t.payload;return{...e,linkBlock:{...e.linkBlock,...n}}}case"STORY_PIN_ITEM_SET_LINK_ERROR":{const{linkError:n}=t.payload;return{...e,linkError:n}}case"STORY_PIN_ITEM_SET_MEDIA":{const{media:n}=t.payload;return{...e,media:n,canvasJson:null}}case"STORY_PIN_ITEM_UPDATE_MEDIA":{const{media:n}=t.payload;return{...e,media:e.media?a()({},e.media,n):null}}case"STORY_PIN_ITEM_SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"STORY_PIN_ITEM_SET_TITLE_ERROR":{const{titleError:n}=t.payload;return{...e,titleError:n}}case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:n,canvasJson:r}=t.payload;return{...e,media:n,canvasJson:r}}case"STORY_PIN_ADD_BLOCK":{const{blockId:n}=t.payload,{blockIds:r}=e;return{...e,blockIds:[...r,n]}}case"STORY_PIN_REMOVE_BLOCK":{const{blockId:n}=t.payload,{blockIds:r}=e;return{...e,blockIds:[...r.filter(e=>e!==n)]}}default:return e}}},LqyK:function(e,t,n){n.r(t);var r=n("+NLT"),a=n("UTsl"),o=n("JZM8"),i=n.n(o),s=n("eOdZ"),c=n("zwad"),l=n("mBfy");const d={open(e){const t=i()(e,d._validParams),n=d._getDialogType(e),r=d.generateFbRef(),o=e.object_type&&e.object_id&&"feed"===n;let u=c.a.absolutify(e.path);const h=c.a.getQueryStringParams();if(h.ptrf&&(u=c.a.appendQueryString(u,{ptrf:h.ptrf})),o&&(u=c.a.appendQueryString(u,{fb_ref:r})),t.method=n,"feed"===t.method){const n=d.getWindowOptions(e.width||580,e.height||400);let r="http://www.facebook.com/sharer/sharer.php?u="+u;t.picture&&(r+="&picture="+t.picture),t.name&&(r+="&title="+t.name),t.description&&(r+="&description="+t.description),t.caption&&(r+="&caption="+t.caption),window.open(encodeURI(r),"sharer",n)}else"send"===t.method?t.link=u:"share"===t.method&&(t.href=u),a.default.ensureInit(n=>{n.getLoginStatus(()=>{if("send"===t.method){n.ui(t);let r,a=10;const o=setInterval(()=>{!(r=function(){const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let n=0;n<t.length;n+=1)t[n].parentNode.removeChild(t[n]);return e[0]}())&&a||(clearInterval(o),r&&d.executeMessengerCallback(r,e.callback)),a-=1},1e3)}else"share"===t.method&&n.ui(t,t=>{if(o&&t&&!t.error_message){const t=s.a.create("LogFacebookFeedShare",{});t.options={object_type:e.object_type,object_id:e.object_id,fb_ref:r},t.callCreate({showError:!1})}e.callback&&e.callback(t)})})},l.default)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let n=10;const r=setInterval(()=>{"0px"!==e.style.width&&n||(clearInterval(r),e.style.width="575px"),n-=1},1e3);t&&t()},generateFbRef(){let e="";for(;e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return(l.default.id||r.a.instance.unauth_id)+":"+e},_getDialogType:e=>d._validOptions.includes(e.type)?e.type:"feed",getWindowOptions(e,t){const n=e||580,r=t||400,a=screen.width,o=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+r+",left="+Math.round((a-n)/2)+",top="+(o>r?Math.round((o-r)/2):0)}};t.default=d},Nle8:function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("ajUs"),a=n("zpPL");function o(e){const t=a.a.instance;let n;if(t){const a=t.getState();if(a.pins&&e){const t=a.pins[e],o=a.location;t&&(n=Object(r.a)(t,o))}}return n}},"O1y+":function(e,t,n){var r=n("pOug");const a=Object(r.a)(e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null);t.a=a},P6kd:function(e,t,n){var r=n("q1tI"),a=n.n(r),o=n("Ye/N"),i=n("oRao"),s=n("eOdZ"),c=n("vxan"),l=n("vvax"),d=n("n6mq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=5,p=27,m=38,f=40,g=13;t.a=Object(c.a)(class extends a.a.Component{constructor(...e){super(...e),u(this,"state",{isOpen:this.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{this.setState({isOpen:!1})}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{e.keyCode===m?this.handlePrevHashtag(e):e.keyCode===f?this.handleNextHashtag(e):e.keyCode===p?this.handleClose(e):e.keyCode===g&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{const{makeCancelablePromise:t}=this.props;t(s.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,h),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}UNSAFE_componentWillReceiveProps(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:r,idealDirection:s}=this.props,c=e.filter(e=>e.query),u=s||"down",h="flyout_"+c.length;return t&&c.length>0?a.a.createElement("div",{className:"HashtagFlyout"},a.a.createElement(d.k,{key:h,anchor:r,idealDirection:u,onDismiss:this.onDismiss,size:"sm"},a.a.createElement("div",{className:"HashtagRecommendations"},c.length>0?c.map((e,t)=>a.a.createElement("div",{className:"HashtagItem",key:e.query},a.a.createElement(d.Q,{onTouch:t=>this.addHashtag(e.query),fullWidth:!1},a.a.createElement(d.c,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",deprecatedPadding:1},a.a.createElement(d.c,{flex:"grow"},a.a.createElement(d.L,{inline:!0,size:"sm",weight:"bold"},e.query)),a.a.createElement(d.c,{flex:"none"},a.a.createElement(d.L,{inline:!0,size:"xs"},Object(l.b)(o.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout"),{count:a.a.createElement(i.a,{value:Number(e.pin_count),key:"pinCount"})}))))))):null))):null}})},PsyL:function(e,t,n){t.a=function({hours:e,minutes:t}){return`PT${e}H${t}`}},RHD0:function(e,t,n){n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m}));var r=n("RNo4"),a=n("Ep0g"),o=n("0S8y"),i=n("fAMq");const s=(e,t)=>{return Object.keys(t).filter(n=>{const r=t[String(n)];return(r.pinner||{}).id===e.id&&!r.is_repin}).map(e=>t[e])},c=(e,t)=>{return s(e,t).filter(e=>{if(e.created_at){return Object(i.i)(e.created_at).ms<20*i.a}return!1})},l=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),d=["en","fr","de","es","it","pt","nl","nb","fi","sv","da","nl","pt"],u=e=>{const t=e.toLowerCase();return!!d.find(e=>t.startsWith(e))},h=(e,t)=>!(!e||!e.isAuth)&&Object(a.c)(e.country),p=e=>e.isAuth&&!e.isPartner&&!Object(o.d)({user:e})&&!Object(o.c)({user:e}),m=({requestContext:e,router:t,pinId:n})=>{((e,t)=>{const n=Object(r.a)("/business/convert",{next:t});e.push(n)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(n))}},UTsl:function(e,t,n){n.r(t);var r=n("xBNU"),a=n.n(r),o=n("eOdZ"),i=n("6tKR"),s=n("mBfy");n("/5zs");let c=!1;const l={ensureInit(e,t=s.default,n="en_US",r){i.default.load([],`//connect.facebook.net/${n}/sdk.js`,"fb"),i.default.ready("fb",()=>{this._fbCallback(e,t,r)}),window.fb_init=1},_fbCallback(e,t,n){const r=window.FB;r&&(c||(n&&(n.check("enabled_fb_and_prevent_google_one_tap_error_refresh")||n.check("enabled_scroll_and_prevent_google_one_tap_error_refresh")||n.check("enabled_load_secondary_content_after_user_scroll")||n.check("enabled_load_secondary_content_after_fb_success"))?r.init({appId:a.a.FB_KEY,status:!0,xfbml:!0,version:"v2.7"}):r.init({appId:a.a.FB_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",e=>{l.refreshAccessToken(t)}),c=!0,window.fb_init=2),e(r))},ensureLoggedIn(e,t){l.ensureInit(t=>{l.logIn(t,e)},t)},logIn(e,t){e&&(e.getUserID()?t(e):e.login(()=>{t(e)}))},refreshAccessToken(e){e.isAuthenticated()&&e.attributes.facebook_id&&!e.isLimitedLogin()&&l.ensureInit(e=>{if(e.getUserID()){const t=e.getAccessToken();if(t){o.a.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}}},e)},injectTrackingPixel(e){!function(){const e=window._fbq||(window._fbq=[]);if(!e.loaded){const t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbds.js";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",e,{value:"0.00",currency:"USD"}])}};t.default=l},VpfY:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"h",(function(){return b}));var r=n("RHD0"),a=n("7jH2"),o=n("Y8Sn");const i="30d",s="30d_realtime";function c(e){const{third_party_pin_owner:t,link_domain:n,pinner:r,domain:a,native_creator:o}=e,i=n&&n.official_user;return i?i.id:t?t.id:o?o.id:r&&r.domain_verified&&r.domain_url===a?r.id:null}function l(e){var t,n;return!Object(o.j)(e.videos)&&!Object(o.i)(e)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t?void 0:null===(n=t.creator_analytics)||void 0===n?void 0:n[i])||{}).length}function d(e){var t,n;return!Object(o.j)(e.videos)&&!Object(o.i)(e)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t?void 0:null===(n=t.creator_analytics)||void 0===n?void 0:n[s])||{}).length}function u(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t[i])||{}).length}function h(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t[s])||{}).length}function p(e){const t=e.aggregated_pin_data||{};return t.is_shop_the_look||t.is_stela}function m(e){const{native_creator:t,pinner:n,domain:r}=e;return(e.link_domain&&e.link_domain.official_user||!!e.third_party_pin_owner||!!n&&n.domain_verified&&n.domain_url===r)&&!e.is_promoted||t}function f(e,t){const{is_native:n,native_pin_stats:r}=e,o=r||{},i=Object(a.p)({pin:e}),{video:s}=Object(a.y)(i)||{};return m(e)||p(e)||n&&s&&e&&e.link||Object.keys(o).length>0&&!l(e)&&!u(e)||e.promoter&&e.is_promoted&&!t}function g(e){if(!e.story_pin_data_id)return;const{story_pin_data:{metadata:t,pages:n=[]}={}}=e;return{metadata:t,detailsPage:n[1]}}const b=({viewer:e,pin:t})=>Object(r.b)(e)&&t.is_quick_promotable_by_pinner},XKAG:function(e,t,n){var r=n("ut/Y"),a=n("MMmD"),o=n("7GkX");e.exports=function(e){return function(t,n,i){var s=Object(t);if(!a(t)){var c=r(n,3);t=o(t),n=function(e){return c(s[e],e,s)}}var l=e(t,n,i);return l>-1?s[c?t[l]:l]:void 0}}},ZE2w:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("4dcN"),a=n("eOdZ");const o="collaborator_approve_invite";function i(e,t){return a.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return a.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>{return a.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{r.a.trackEvent(o,"success")}).catch(()=>r.a.trackEvent(o,"error"))}}function l(e,t,n){return t=>{const{invited_user:r,status:o,board:{id:i}}=e;return a.a.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:i,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));const r={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},a={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function o(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function i(e){return!!e&&e.severity===a.ABUSIVE}},Zygf:function(e,t,n){function r(e){return Boolean(e.promoted_is_removable)}n.d(t,"a",(function(){return r}))},c4Fo:function(e,t,n){var r=n("q1tI"),a=n.n(r),o=n("clxp"),i=n("zXAL");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=()=>null;t.a=Object(i.a)(class extends r.Component{constructor(...e){super(...e),s(this,"view",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:r}=this.props;r.viewExperience(t,n)}),s(this,"complete",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:r,preventRemoval:a}=this.props;a?r.completeExperience(t,n,a):r.completeExperience(t,n)}),s(this,"dismiss",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:r,preventRemoval:a}=this.props;a?r.dismissExperience(t,n,a):r.dismissExperience(t,n)})}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e,t){if(this.props.disableAutoView)return;const n=this.getExperience(e),r=this.getExperience(this.props);r&&this.shouldRenderExperience(r)&&(n&&n.experience_id===r.experience_id||this.view(r))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const{type:t,experience_id:n}=e;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}render(){const{children:e,disableAutoView:t}=this.props,n=this.getExperience(this.props);if(n&&this.shouldRenderExperience(n)&&e){const{placement_id:r,experience_id:i}=n;return a.a.createElement(o.a,{name:`Experience(${r}:${i})`},"function"==typeof e?e({...n,complete:()=>this.complete(n),dismiss:()=>this.dismiss(n),...t?{view:()=>this.view(n)}:{}}):e)}return a.a.createElement(c,null)}})},c50B:function(e,t,n){n.d(t,"m",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"l",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"o",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"q",(function(){return b})),n.d(t,"n",(function(){return _})),n.d(t,"j",(function(){return v})),n.d(t,"p",(function(){return y}));n("q1tI");const r=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,r)=>{const a=t[e];a&&(n[r]=a)}),n.join("")};function a(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}const o=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function i(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(o)&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function s(e){return function(t,n){const r=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),a=[],o=!1!==e.checkLength&&r.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!o||a.push(e.message);const i={errors:a,warnings:[]};return n&&n(i),i}}function c(e){return function(t,n){const a=/^\d+$/,o=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(a)&&o.push(e.message));const i={errors:o,warnings:[]};return n&&n(i),i}}function l(e){return function(t,n){const a=/^[\d\ -]+$/,o=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(a)&&o.push(e.message));const i={errors:o,warnings:[]};return n&&n(i),i}}function d(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function u(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const a=t.length;e.min&&a<e.min?r.push(e.minErrorString):e.max&&a>e.max&&r.push(e.maxErrorString);const o={errors:r,warnings:[]};return n&&n(o),o}}function h(e){return function(t,n){const r=[];t!==(e&&e.targetValue)&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function p(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<=e.value&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function m(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<e.value&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function f(e){return function(t,n){const r=[];/^[\040-\176]*$/.test(t)||r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function g(e){return function(t,n){const r=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,a=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(r)&&(t=t&&t.trim(),a.push(e.message));const o={errors:a,warnings:[]};return n&&n(o),o}}function b(e){return function(t,n){t=t&&t.trim();const r=[],a=new Date(t);t&&!a.getTime()&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function _(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function v(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function y(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}},dtqy:function(e,t,n){var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("qWlA"),s=n("5S2N"),c=n("fArA"),l=n("XCz/"),d=n("7jH2"),u=n("U4JR");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(c.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:r}=e&&t&&e[t]||{},{index:a}=r||{};return void 0!==n?{carouselSlotCurrentIndex:a||n||0}:{}}),(function(e){return class extends r.PureComponent{constructor(...e){super(...e),h(this,"state",{showEditModal:!1}),h(this,"onHide",()=>{this.setState({showEditModal:!1}),(this.props.onToggleModal||d.A)(!1)}),h(this,"handlePinEditButtonClick",Object(i.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:n}=this.props;(n||d.A)(!0),Object(u.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:n,onSubmit:o,carouselSlotCurrentIndex:i}=this.props,{showEditModal:c}=this.state,d={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return a.a.createElement(r.Fragment,null,a.a.createElement(e,d),c&&a.a.createElement(l.a,{name:"web_unified_description_both"},({anyEnabled:e})=>a.a.createElement(l.a,{name:"web_unified_description_both_perf",activate:!1},({anyEnabled:r})=>a.a.createElement(s.a,{carouselSlotCurrentIndex:i,onDelete:n,onHide:this.onHide,onSubmit:o,pinId:t,useUnifiedDescription:e||r}))))}}}))},e0nq:function(e,t,n){function r(e){return{type:"PIN_BETTER_SAVE",payload:e}}function a(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function o(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function i(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}))},e3KR:function(e,t,n){var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=(n("7vSn"),n("i8i4")),s=n("8cMa"),c=n("n6mq");var l=({isOpen:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:r,showSectionsIcon:o})=>t||n||r||o?a.a.createElement(c.c,{display:"flex",direction:"row",marginRight:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center"},n&&a.a.createElement(s.a,{type:"secret"}),r&&a.a.createElement(s.a,{type:"protected"}),t&&a.a.createElement(s.a,{type:"group"}),o&&a.a.createElement(s.a,{type:"sections"})):null,d=n("JW66"),u=n("Ye/N"),h=n("4cpq");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=52;class f extends r.Component{constructor(...e){super(...e),p(this,"state",{hovered:!1}),p(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),p(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),p(this,"handleTouch",()=>{const{board:e,onClick:t}=this.props;t(e)}),p(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),p(this,"touchableRef",Object(r.createRef)())}focus(){if(this.touchableRef.current){const e=Object(i.findDOMNode)(this.touchableRef.current);e&&(e.focus,1)&&e.focus()}}render(){const{hovered:e}=this.state,{board:t,buttonText:n,isSectionOpen:r,shouldOpenSections:o,showFlyoutSaveButton:i}=this.props,s=!!t.section_count&&t.section_count>0,p=s?"boardWithSection":"boardWithoutSection",f=t.image_cover_url;return a.a.createElement(h.a,{id:p},a.a.createElement(c.Q,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.touchableRef},a.a.createElement(c.c,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:m,marginStart:3,marginEnd:3,marginBottom:1,marginTop:1,dangerouslySetInlineStyle:{__style:{borderRadius:12}}},a.a.createElement(c.c,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:36,height:36,dangerouslySetInlineStyle:{__style:{borderRadius:8}}},f&&!o&&a.a.createElement(c.v,{wash:!0,width:36,height:36},a.a.createElement(c.q,{src:f,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})),f&&o?a.a.createElement(c.v,{wash:!0,width:36,height:36},a.a.createElement(c.q,{src:f,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})):a.a.createElement(c.c,{color:o?"lightGray":"transparent",width:"100%",height:"100%"})),a.a.createElement(c.c,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:1},a.a.createElement(c.L,{truncate:!0,weight:o||!o?"bold":"normal"},t.name)),t&&(!e||e&&s&&!r)?a.a.createElement(c.c,null,a.a.createElement(l,{isOpen:t.isOpen,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===d.a.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===d.a.BoardPrivacy.PROTECTED,showSectionsIcon:s&&o})):null,e&&(0===t.section_count||!o)&&i&&a.a.createElement(c.c,{marginEnd:2,flex:"none"},a.a.createElement(c.d,{accessibilityLabel:"save button",color:"red",inline:!0,onClick:this.handleButtonClick,text:n||u.a._("Save","save button")})))))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}p(f,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});const b=52,_=53,v=11;class y extends r.Component{constructor(...e){super(...e),g(this,"state",{hovered:!1}),g(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),g(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),g(this,"handleTouch",()=>{const{board:e,onClick:t,section:n}=this.props;t(n,e)}),g(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),g(this,"touchableRef",Object(r.createRef)())}focus(){if(this.touchableRef.current){const e=Object(i.findDOMNode)(this.touchableRef.current);e&&(e.focus,1)&&e.focus()}}render(){const{hovered:e}=this.state,{buttonText:t,section:n,showSectionSaveButton:r}=this.props;return a.a.createElement(c.Q,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.touchableRef},a.a.createElement(c.c,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:b,marginTop:1,dangerouslySetInlineStyle:{__style:{borderRadius:12,marginLeft:_,marginRight:v}}},a.a.createElement(c.c,{flex:"grow",paddingY:1,marginStart:4},a.a.createElement(c.L,{truncate:!0},n.title)),e&&r&&a.a.createElement(c.c,{marginEnd:2,flex:"none"},a.a.createElement(c.d,{accessibilityLabel:"save button",color:"red",inline:!0,text:t||u.a._("Save","save button"),onClick:this.handleButtonClick}))))}}g(y,"defaultProps",{showSectionSaveButton:!0});var E=n("zLLH");var S=Object(E.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1})(e=>{const{board:t,buttonText:n,sectionsResource:r,onClick:o,onButtonClick:i,showSectionSaveButton:s}=e,l=r&&r.data||[];return a.a.createElement(c.c,null,!r.isLoaded&&a.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},a.a.createElement(c.H,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner"),show:!0})),r.isLoaded&&a.a.createElement(c.c,null,l.map(e=>a.a.createElement(y,{board:t,buttonText:n,key:e.id,onButtonClick:i,onClick:o,section:e,showSectionSaveButton:s}))))});function w({isBoardCreate:e,onCreateBoardClick:t}){const[n,o]=Object(r.useState)(!1);return a.a.createElement(c.c,{"data-test-id":"create-board",height:"100%",display:"flex"},a.a.createElement(c.Q,{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTouch:t,shape:"rounded"},a.a.createElement(c.c,{display:"flex",alignItems:"center",color:n?"lightGray":"white",padding:2,width:"100%",height:"100%"},a.a.createElement(c.c,{marginRight:5,marginLeft:4},a.a.createElement(c.n,{accessibilityLabel:"",size:28,icon:"add-circle",color:"red"})),e?a.a.createElement(c.L,{align:"center",truncate:!0,weight:"bold"},u.a._("Create board")):a.a.createElement(c.L,{align:"center",truncate:!0,weight:"bold"},u.a._("Create section")))))}var C=n("nKlH");const I=52;function k({onClick:e,title:t}){const[n,o]=Object(r.useState)(!1);return a.a.createElement(c.Q,{onTouch:()=>{e({title:t})},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},a.a.createElement(c.c,{color:n?"lightGray":"white",display:"flex",alignItems:"center",height:I,marginStart:3,marginEnd:3,marginBottom:1,dangerouslySetInlineStyle:{__style:{borderRadius:12}}},a.a.createElement(c.c,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:36,height:36,dangerouslySetInlineStyle:{__style:{borderRadius:4}}},a.a.createElement(c.c,{color:"lightGray",width:"100%",height:"100%"})),a.a.createElement(c.c,{flex:"grow",paddingY:1},a.a.createElement(c.L,{truncate:!0,weight:"bold"},t)),n&&a.a.createElement(c.c,{marginEnd:2},a.a.createElement(c.d,{accessibilityLabel:"create button",color:"red",inline:!0,text:u.a._("Create","create button to create a new board")}))))}const O=e=>{const{suggestionsResource:t,onClick:n,pinBuilderSuggestions:r}=e,o=r||t&&t.data||[],i=a.a.createElement(a.a.Fragment,null,o.map((e,t)=>a.a.createElement(k,{key:t,title:e.title,onClick:n})));return a.a.createElement(a.a.Fragment,null,o?i:a.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},a.a.createElement(c.H,{accessibilityLabel:u.a._("loading board suggestions","accessibility text for loading spinner"),show:!0})))},x=(Object(E.c)({name:"BoardTitleSuggestionsResource",key:"suggestionsResource",options:({pinId:e})=>({pin_id:e})},{allowStale:!1})(O),O);var B=n("0BOE"),R=n("eUcp"),T=n("qyR9"),j=n("NtFK"),D=n("U4JR"),L=n("fArA");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return H}));const A=128.5,M=439,N=52;class F extends r.Component{constructor(...e){super(...e),P(this,"state",{isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),P(this,"getItems",()=>{const{boardResource:e,suggestedBoardsShortListResource:t}=this.props;if(!e||!e.data)return[];const{all_boards:n}=e&&e.data,r=n.map(e=>this.mapBoards(e,"allBoards",0)),a=(t&&t.data||[]).map((e,t)=>this.mapBoards(e,"shortlist",t+1)),{searchQuery:o}=this.state;return o.length>=T.a?[...Object(B.a)(r,o)]:[...r.length>3&&a&&a.length?[{type:"header",title:u.a._("Top board suggestions","Header for top suggesions in board picker")},...a]:[],{type:"header",title:u.a._("All boards","Header for all boards in board picker")},...r,...r.length<=3?[{type:"header",title:u.a._("Suggested board names","Header for suggested boards in board picker")}]:[]]}),P(this,"mapBoards",(e,t,n)=>{const{setBoardWithSection:r}=this.props,{selectedBoardId:a,selectedBoardCategory:o}=this.state,i=e.id===a&&t===o;return i&&r&&r(e),{...e,category:t,isOpen:i,gridIndex:n}}),P(this,"handleBack",()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),P(this,"handleSectionClick",(e,t)=>{const{onItemChosen:n}=this.props;Object(D.a)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),n({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||""})}),P(this,"handleBoardWithSectionsClick",e=>{const{selectedBoardId:t,selectedBoardCategory:n}=this.state,r=t===e.id&&n===e.category;this.setState({isSectionOpen:!0,selectedBoardId:r?"":e.id,selectedBoardCategory:r?"":e.category})}),P(this,"handleBoardClick",({board:e,toggleSections:t})=>{const{onItemChosen:n}=this.props;this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(Object(D.a)(101,{component:13282,element:36,objectId:e.id,view:91,grid_index:e.gridIndex}),n({boardId:e.id,url:e.url,title:e.name||""}))}),P(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),P(this,"boardSectionsHeaderRef",Object(r.createRef)())}componentDidMount(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}componentDidUpdate(e,t){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus()}setPWTLoadingEnd(){const e=!this.props.boardResource||!!this.props.boardResource.error;Object(j.h)(16,{error:e})}render(){const{boardResource:e,buttonText:t,customItem:n,onBoardCreate:r,onButtonClick:o,paneWidth:i,showCreateBoardButton:s,showFlyoutSaveButton:l,showSections:d,showSectionSaveButton:p,suggestedBoardsShortListResource:m}=this.props,{isSectionOpen:g,searchBoxFocused:b,searchQuery:_}=this.state;if(!e)return null;const{isLoaded:v,data:y,error:E}=e;let I=[];(v&&!E||m&&m.data&&!m.error)&&(I=this.getItems());const k=I.filter(e=>e&&"allBoards"===e.category).length,O=null===g?"":"BoardsSlideRight",B=v&&y&&y.create_suggestions.map(e=>({title:e}))||[],T=e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(c.j,null),a.a.createElement(c.c,{overflow:"hidden",height:N,dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},a.a.createElement(w,{onCreateBoardClick:()=>r({title:this.state.searchQuery}),isBoardCreate:e})));return a.a.createElement(c.c,{width:"100%",shape:"rounded",overflow:"hidden",height:M,color:"white",dangerouslySetInlineStyle:{__style:{zIndex:R.b}}},v?null:a.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},a.a.createElement(c.H,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner"),show:!0})),a.a.createElement(c.c,{display:"flex",direction:"row"},v&&a.a.createElement("div",{className:g?"BoardsSlideLeft":O},a.a.createElement(c.c,{position:"relative"},a.a.createElement(c.c,{display:"flex",direction:"row",width:2*i,dangerouslySetInlineStyle:{__style:{zIndex:0}}},a.a.createElement(c.c,{display:"flex",direction:"column",width:i},a.a.createElement(c.c,{padding:3},a.a.createElement(C.a,{accessibilityLabel:u.a._("Search through your boards","search bar placeholder text"),focused:b,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:u.a._("Search","search bar placeholder text"),value:_})),a.a.createElement(c.c,{minHeight:322,maxHeight:322,overflow:"scrollY"},m&&!m.isLoaded?a.a.createElement(h.a,{id:"suggestedBoardsContainer"},a.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:A},a.a.createElement(c.H,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner"),show:!0}))):null,n,I.map((e,n)=>"header"===e.type?a.a.createElement(c.c,{key:e.title,paddingX:3,paddingY:1,marginTop:n>0?2:1},a.a.createElement(c.L,{size:"sm"},e.title)):a.a.createElement(c.c,{key:`${e.category}-${e.id}`},a.a.createElement(f,{board:e,buttonText:t,onClick:e=>{this.handleBoardClick({board:e,toggleSections:d&&!!e.section_count})},onButtonClick:o,shouldOpenSections:d,showFlyoutSaveButton:l}))),k<=3&&a.a.createElement(x,{onClick:r,pinBuilderSuggestions:B})),s&&T(!0)),a.a.createElement(c.c,{display:"flex",direction:"column",width:i},a.a.createElement(c.c,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},a.a.createElement(c.h,{span:2},a.a.createElement(c.c,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3},a.a.createElement(c.o,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"}))),a.a.createElement(c.h,{span:8},a.a.createElement(c.c,{display:"flex",justifyContent:"center",alignItems:"center",height:52},a.a.createElement(c.L,{size:"md",weight:"bold"},u.a._("Choose section","Header for section header")))),a.a.createElement(c.h,{span:2},a.a.createElement(c.c,null))),a.a.createElement(c.j,null),a.a.createElement(c.c,{minHeight:334,maxHeight:334,overflow:"scrollY"},I?a.a.createElement(a.a.Fragment,null,I&&I.map((e,n)=>"header"===e.type?null:a.a.createElement(c.c,{key:`${e.category}-${e.id}`},e.isOpen&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{board:e,buttonText:t,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:o,shouldOpenSections:!1,showFlyoutSaveButton:l,ref:this.boardSectionsHeaderRef}),a.a.createElement(S,{board:e,buttonText:t,onClick:this.handleSectionClick,onButtonClick:o,showSectionSaveButton:p}))))):null),s&&T(!1)))))))}}P(F,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0});const U=Object(L.compose)(Object(o.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{advertiser_id:void 0,username:void 0}})),Object(E.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:({advertiser_id:e,username:t})=>({field_set_key:"board_picker",...t?{username:t}:{},...e?{advertiser_id:e,filter:"protected"}:{}})}))(F),H=Object(E.c)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3})})(F)},eUcp:function(e,t,n){n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d}));const r=1,a=2,o=2,i=3,s=3,c=3,l=3,d=100},fEA9:function(e,t,n){n.r(t);var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=(n("1vym"),n("qWlA")),s=n("TSYQ"),c=n.n(s),l=n("clxp"),d=n("1inl"),u=n("ajUs"),h=n("Ye/N"),p=n("a49R");class m extends r.Component{constructor(...e){var t,n,r;super(...e),r=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const f=e=>r.createElement(p.a.Consumer,null,t=>r.createElement(m,Object.assign({},e,{setActive:t})));f.displayName="MasonryFlyout";var g=f,b=n("3gA6"),_=n("jHGc"),v=n("eOdZ"),y=n("e3KR"),E=n("Wrea"),S=n("fArA"),w=n("0zyx"),C=n("TN0d"),I=n("vvax"),k=n("lm6u"),O=n("EuRG"),x=n("H/Lk"),B=n("WnNx"),R=n("NtFK"),T=n("U4JR"),j=n("NjDU"),D=n("pLLR"),L=n("CvCA"),P=n("e0nq");const A=5e3,M=16,N=({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:r,recentUpsell:a}=n;if(a[e])return!1;const o=r.findIndex(t=>t.boardId!==e);return(-1===o?r.length:o)+1>=3};var F=Object(o.connect)(null,(e,t)=>({toastShown:()=>e(Object(P.c)(t.boardId))}))(class extends r.PureComponent{constructor(...e){var t,n,r;super(...e),r=()=>{const{boardId:e}=this.props;Object(T.a)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return r.createElement(L.a,{duration:A,onHide:n,text:Object(I.b)(h.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:`${t}more_ideas/?ideas_referrer=${M}`,onClick:this.handleClick})}}),U=n("zLLH"),H=n("ZdPf"),q=n("B6Tf"),z=n("nGHF"),G=n("n6mq"),W=n("0nTG");function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinBetterSave",(function(){return V}));const $={CLASSIC:40,LEGO:44},K=4;function Q({savedInfo:e,variant:t}){const n="lego-closeup"===t,r=n?"sm":"md";return a.a.createElement(b.b,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||""},a.a.createElement(G.c,{marginStart:n?1:0},a.a.createElement(G.L,{color:"darkGray",inline:!0,size:r},Object(I.b)(h.a._("Saved to {{ destination }}","Saved to label for better save"),{destination:a.a.createElement(G.L,{color:"darkGray",key:"pin_auto_save_link",size:r,truncate:!0,weight:"bold"},e.title)}))))}class V extends a.a.Component{constructor(...e){var t;super(...e),t=this,Y(this,"state",{boardWithSection:null,buttonRef:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),Y(this,"saveButtonRef",e=>{this.setState({buttonRef:e})}),Y(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:r,url:a}}=e,o={boardId:n,title:r,url:a};this.updateSelectedBoardOrSection(o),this.updateSavedState({...o,localPinId:e.id}),t&&Object(H.d)(t.sensitivity)&&Object(H.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),Y(this,"updateSavedState",e=>{const{location:t,save:n,searchQueryInvalidated:r,onSave:a,pin:{id:o}}=this.props,i=t.query&&t.query.q||Object(w.a)(t.history);n({pinId:o,...e}),i&&r(i),a&&a()}),Y(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),Y(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),Y(this,"dropdownRef",a.a.createRef()),Y(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),Y(this,"handleBoardCreate",Object(i.a)(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),Y(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),Y(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),Y(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(T.a)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),Object(R.g)(16),this.showFlyout())}),Y(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(T.a)(101,{component:13282,element:36,objectId:n.boardId,grid_index:K}),await t.save(n)):t.handleBoardDropdownClick(e)})),Y(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),Y(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:r})=>{const{pin:{id:a},savedInfo:{localPinId:o}={}}=this.props;this.updateSavedState({pinId:a,localPinId:o,boardId:e,sectionId:t||"",url:n,title:r})}),Y(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),Y(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),Y(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:r,pin:{id:o},postRepinMoreIdeasUpsell:i,postRepinUpsellDisabled:s,save:c,setMostRecentBoard:l,showRepinAnimation:u,toastManagerContext:h}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),d=e.url,{incrementBoardPinCount:p,updateUserPinCount:m,viewerUserId:f}=t.props;!s&&d&&N({boardId:e.boardId,boardUrl:d,postRepinMoreIdeasUpsell:i})&&h.showToast(({onHide:t})=>a.a.createElement(F,{boardId:e.boardId,boardName:e.title,boardUrl:d,onHide:t})),c({pinId:o,...e,localPinId:n.id}),C.b.publish("currentUser","pinCreated",n),C.b.publish(n.board.id,"pinCreated",{pin:n}),p({boardId:e.boardId,sectionId:e.sectionId}),m(f),u(o),r&&e.boardId!==r.id&&l(e.boardId,e.title,e.url)}catch(p){n||d.a.showError(p.message_detail||p.message),t.resetPinSavedState()}})),Y(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(e){this.updateSelectedItem()}getPinResource(e){const{carousel_data:t,location:n,pin:r}=this.props,a=t&&t.index,o=Object(u.a)(r,n)||`${r.tracking_params}~0`,i={description:r.description||"",link:r.link,title:r.title||"",clientTrackingParams:o,board_id:e.boardId||"",pin_id:r.id||"",image_base64:r.image_base64,is_buyable_pin:!1,is_removable:r.promoted_is_removable,carousel_slot_index:a||0,...e.sectionId?{section:e.sectionId}:{},...Object(W.a)(r)||{}};return v.a.create("RepinResource",i)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,useMasonryFlyout:t,onToggleModal:n,pin:r,renderSavedStatus:o,renderPinSaveTooltip:i,selectedItem:s,savedInfo:d,unselectedText:u,variant:p,viewParameter:m}=this.props,{boardWithSection:f,buttonRef:b,showBoardFlyout:v,showRepinModal:E,sensitiveContentNotice:S,suggestedBoardTitle:w}=this.state,C=t?g:G.k,{carousel_data:I}=r,O="lego-closeup"===p||"lego-pin"===p,x=O?"sm":"md";let B={};"lego-closeup"===p?B={bgColor:"transparent",iconColor:"darkGray",size:"sm"}:"lego-pin"===p?B={bgColor:"white",iconColor:"darkGray",size:"sm"}:"pin"===p&&(B={bgColor:"transparentDarkGray",iconColor:"white",size:"sm"});const R=o&&o({savedInfo:d,variant:p}),T=a.a.createElement(y.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:r});return a.a.createElement(l.a,{name:"PinBetterSave"},a.a.createElement(G.c,Object.assign({width:"100%"},"lego-closeup"===p?{display:"flex",height:$.LEGO,dangerouslySetInlineStyle:{__style:{backgroundColor:"#efefef",borderRadius:"16px"}}}:{}),d&&d.title?a.a.createElement(G.c,Object.assign({display:"flex",direction:"row",alignItems:"center"},"lego-closeup"===p?{width:"100%",paddingX:2}:{},"lego-pin"===p?{marginLeft:-1,marginRight:-1}:{}),R&&a.a.createElement(G.c,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},R),a.a.createElement(G.c,{paddingX:1,flex:"none",marginLeft:"auto"},a.a.createElement(_.default,{component:0,onDelete:this.deleteSavedState,onSubmit:this.handleEditSubmit,pinId:d.localPinId,onToggleModal:n,viewParameter:m,carouselSlotCurrentIndex:I&&I.index,style:B,useLegoStyles:"lego-pin"===p}))):a.a.createElement(G.c,{alignItems:"center",display:"flex",width:"100%",height:O?$.LEGO:$.CLASSIC},a.a.createElement("button",{className:c()("PinBetterSave__Dropdown",{"PinBetterSave__Dropdown--lego":O,"PinBetterSave__Dropdown--lego-pin":"lego-pin"===p,"PinBetterSave__Dropdown--lego-closeup":"lego-closeup"===p,"PinBetterSave__Dropdown--expanded":v&&!O,"PinBetterSave__Dropdown--expandedLego":v&&O}),"data-test-id":"PinBetterSaveDropdown",onClick:this.handleBoardDropdownClick,ref:this.dropdownRef},a.a.createElement(G.c,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},a.a.createElement(G.c,{flex:"grow",minWidth:0,overflow:"hidden"},s&&s.title?a.a.createElement(G.L,{truncate:!0,__dangerouslyIncreaseLineHeight:!0,size:x},a.a.createElement("span",{className:c()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":O})},s.title)):a.a.createElement(G.L,{color:"gray",__dangerouslyIncreaseLineHeight:!0,truncate:!0,size:x},a.a.createElement("span",{className:c()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":O})},u))),a.a.createElement(G.c,{marginLeft:2,flex:"none","data-test-id":"boardSelectionDropdown"},a.a.createElement("div",{className:c()("PinBetterSave__DownArrowContainer",{"PinBetterSave__DownArrowContainer--lego":O})},a.a.createElement(G.n,{accessibilityLabel:h.a._("Select a board you want to save to","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),!v&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:c()("PinBetterSave__Button",{"PinBetterSave__Button--lego":O,"PinBetterSave__Button--lego-pin":"lego-pin"===p}),onClick:this.handleSaveClick,"data-test-id":"PinBetterSaveButton",ref:this.saveButtonRef},a.a.createElement(G.L,{color:"white",size:x,weight:"bold"},h.a._("Save","BetterSave Save label"))),!!i&&!!b&&i(b))),a.a.createElement(k.a,{additionalCreateFields:{is_stl_pin:Object(W.d)(r)},boardWithSection:f,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showCreate:!0,shouldShowToast:!0,pin:r},({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:r,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:i,handleSaveToBoard:s,newPin:c,updateDescription:l,showSharingUpsell:d,modalTitle:u,setModalTitle:h,pin:p})=>a.a.createElement(q.b,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:r,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:i,handleSaveToBoard:s,updateDescription:l,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:S,pin:p,pwtAuxData:{pin_create_method:"repin"},suggestedBoardTitle:w,boardWithSection:f,shouldRenderContent:E,newPin:c,modalTitle:u,setModalTitle:h,showCreate:!0,showSharingUpsell:d})),v&&"lego-closeup"===p&&a.a.createElement(G.s,null,a.a.createElement(G.k,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!1,size:"lg"},T)),v&&"lego-closeup"!==p&&a.a.createElement(C,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!t,size:"lg"},T)))}}Y(V,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>a.a.createElement(Q,{savedInfo:e,variant:t})});t.default=a.a.memo(Object(S.compose)(D.e,Object(o.connect)(({location:e,mostRecentBoard:t,pins:n,ui:r,viewer:a},{pin:{id:o}})=>{const i=n[o],{postRepinMoreIdeasUpsell:s}=r;return{carousel_data:i&&i.carousel_data,isLimitedLogin:a.isLimitedLogin,savedInfo:i&&i.savedInfo,selectedItem:i&&i.selectedItem,location:e,postRepinMoreIdeasUpsell:s,mostRecentBoard:t,viewerUserId:a.id}},e=>({incrementBoardPinCount:({boardId:t,sectionId:n})=>e(Object(E.d)({boardId:t,sectionId:n,increment:1})),save:t=>e(Object(P.a)(t)),unsave:t=>e(Object(P.d)(t)),selectBoardOrSection:t=>e(Object(P.b)(t)),setMostRecentBoard:(t,n,r)=>e(Object(x.a)(t,n,r)),searchQueryInvalidated:t=>e(Object(O.c)(t)),showRepinAnimation:t=>e(Object(B.b)(t)),updateUserPinCount:t=>e(Object(j.b)({userId:t,increment:1}))})),z.c,Object(U.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:()=>({field_set_key:"board_picker"})}),Object(U.c)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5})}))((function(e){const{suggestedBoardsShortListResource:t,initialSelection:n,mostRecentBoard:r}=e;if(n)return a.a.createElement(V,Object.assign({},e,{postRepinUpsellDisabled:!0,unselectedText:n.title}));const o=t&&t.data&&t.data[0];return a.a.createElement(G.c,{overflow:"hidden"},a.a.createElement(V,Object.assign({},e,{initialSelection:t&&t.isLoaded&&o&&{boardId:o.id,title:o.name,url:o.url}||t&&t.isLoaded&&!o&&r&&{boardId:r.id,title:r.name,url:r.url}||void 0,unselectedText:t&&t.isLoaded?h.a._("Select","BetterSave label to pick a board from the list"):"..."})))})))},fZ0m:function(e,t,n){const r={get(e){(()=>n.e("ScriptCommon").then(n.bind(null,"6tKR")))().then(({default:t})=>{t.load([],"https://apis.google.com/js/client:platform.js","gplus"),t.ready("gplus",()=>{e(window.gapi)})})}};t.a=r},gx0O:function(e,t,n){const r=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},a=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};a.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new r(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},a.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},a.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},a.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},a.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1},t.a=a},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return c}));var r=n("q1tI"),a=n("8BHY"),o=n("Ye/N"),i=n("dtqy"),s=n("n6mq");const c=({handlePinEditButtonClick:e,iconSize:t,style:n,useLegoStyles:i=!1,usePersistentOneClickSaveStyles:c,wrappingIconStyle:l})=>i||c?r.createElement(a.a,{accessibilityLabel:o.a._("Edit","edit button on pin"),bgColor:n&&n.bgColor||"white",icon:"edit",iconColor:n&&n.iconColor||"darkGray",iconSize:t||12,onClick:({event:t})=>e(t),size:n&&n.size||"md",wrappingPogStyle:l}):r.createElement(s.o,{accessibilityLabel:o.a._("Edit","edit button on pin"),bgColor:n&&n.bgColor||"white",icon:"edit",iconColor:n&&n.iconColor||"darkGray",onClick:({event:t})=>e(t),size:n&&n.size||"md"});t.default=Object(i.a)(c)},kwau:function(e,t,n){var r=n("/MKj");t.a=Object(r.connect)(({viewer:e})=>({viewer:e}))(({children:e,viewer:t})=>e(t))},"mVx/":function(e,t,n){var r=n("XKAG")(n("JELi"));e.exports=r},mvLR:function(e,t,n){function r(e){let t=!1;return{promise:new Promise((n,r)=>{e.then(e=>t?r({isCanceled:!0}):n(e),e=>r(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return r}))},"n+wb":function(e,t,n){var r=n("q1tI"),a=n.n(r),o=n("Ye/N"),i=n("uiRf"),s=n("xdpg"),c=n("n6mq");function l(e){const{body:t,img:n,onClick:a,selected:i,title:s,username:l,valid:d}=e,u=l||t;return r.createElement(c.c,{marginBottom:4},r.createElement(c.Q,{onTouch:a},r.createElement(c.c,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,r.createElement(c.c,{marginLeft:3,flex:"grow",marginRight:2},r.createElement(c.c,{marginBottom:1},r.createElement(c.L,{size:"md",truncate:!0,weight:"bold"},s)),r.createElement(c.L,{size:"xs",truncate:!0},u)),r.createElement(c.c,{marginLeft:2},((e,t)=>{if(l)return e?r.createElement(c.n,{icon:"check-circle",color:"red",accessibilityLabel:o.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):r.createElement(c.c,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});{const n={text:o.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=o.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),r.createElement(c.d,n)}})(i,d)))))}var d=n("zLLH"),u=n("ZE2w");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n){const{id:r}=e;return t===n.findIndex(e=>e.id===r)}t.a=Object(d.c)({name:"ShareSuggestionsResource",key:"shareSuggestionsResource"},{allowStale:!1})(class extends r.Component{constructor(...e){super(...e),h(this,"state",{selectedCollaborators:[],typeaheadSuggestions:[],value:""}),h(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),h(this,"handleCollaboratorClick",e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:r}=this.state,a=r.concat([e]),o="email"===n?u.c:u.d;this.props.onSelectedCollaboratorsChange({id:t,resource:o}),this.setState({selectedCollaborators:a})}),h(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})}),h(this,"isIdSelected",{})}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],d=(""===e?n:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:Object(s.g)(e)}).concat(n).filter(p)).map((e,t)=>(function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){const a=r.createElement(c.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return r.createElement(l,{img:a,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:a,valid:i}=e,d=r.createElement(c.c,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(c.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:o.a._("Email icon","Email icon on board create modal")})),u=Object(s.c)(o.a._("Email {{ email }}"),{email:a});let h,p;return t?(h=o.a._("Done!","Text that lets the user know we sent the board invite email"),p=()=>void 0):(h=i?o.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):o.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),p=()=>i?n(e):void 0),r.createElement(l,{body:h,img:d,onClick:p,selected:t,title:u,valid:i})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>a.a.createElement("li",{key:t},e));return a.a.createElement(c.c,{display:"flex",direction:"column",height:"100%"},a.a.createElement(c.c,{paddingX:3,paddingY:3},a.a.createElement(c.L,{size:"md"},o.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create"))),a.a.createElement(c.c,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},a.a.createElement(c.c,{flex:"grow"},a.a.createElement(i.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e},a.a.createElement(c.E,{id:"CollaboratorInviteSearchField",accessibilityLabel:o.a._("Search for collaborators by name or email"),onChange:this.handleTextFieldChange,placeholder:o.a._("Search by name or email"),value:e})))),a.a.createElement(c.c,{paddingX:3,overflow:"scrollY"},a.a.createElement("ul",null,d)))}})},nKlH:function(e,t,n){n.d(t,"a",(function(){return c}));var r=n("q1tI"),a=n.n(r),o=n("i8i4"),i=n("n6mq");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.Component{constructor(...e){super(...e),s(this,"setSearchFieldRef",e=>{this.searchField||(this.searchField=e)}),s(this,"setFocus",()=>{if(this.searchField){const e=Object(o.findDOMNode)(this.searchField);if(e instanceof HTMLElement){const t=e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}}})}componentDidMount(){this.props.focused&&window.requestAnimationFrame(this.setFocus)}componentDidUpdate(){this.props.focused&&this.setFocus()}render(){const{accessibilityLabel:e,id:t,onBlur:n,onChange:r,onFocus:o,placeholder:s,value:c}=this.props;return a.a.createElement(i.E,{accessibilityLabel:e,id:t,onBlur:n,onChange:r,onFocus:o,placeholder:s,ref:this.setSearchFieldRef,value:c})}}},pOug:function(e,t,n){t.a=function(e){return function(t){return null!=t?e(t):null}}},pdBG:function(e,t,n){var r=n("AHhP"),a=n.n(r),o=n("gx0O"),i=n("eOdZ"),s=n("mBfy");const c=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let r="TypeaheadResource";e.resource_name&&(r=e.resource_name),this.searchResource=i.a.create(r,t),this.itemsCache=new o.a};Object.assign(c.prototype,a.a),Object.assign(c.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&s.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&s.default&&s.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const r=n.items;if(r&&r.length){this.abortSearch();const a=n.hint;return void this.publishData(e,r,a,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,r){const a={term:e,items:t,hint:n};this.trigger("data",a),r&&r(a)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const r=this.getResource();if(r.isCalling()){const t=r.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(r.set("term",e),r.set("tags",t||this.tags),r.resetBookmark(),r.callGet({showError:!1}).then(t=>{const r=t.resource_response.data,a=r.items,o=r.hint||{},i={hint:o,items:a};this.cacheData(e,i),this.publishData(e,a,o,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;i.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}}),t.a=c},uVIr:function(e,t,n){function r(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",(function(){return r}))},uiRf:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("q1tI"),a=(n("17x9"),n("pdBG"));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends r.Component{constructor(...e){super(...e),o(this,"searchCache",Object.create(null)),o(this,"lastSearchedQuery",null),o(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new a.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}UNSAFE_componentWillReceiveProps({value:e}){null!=e&&e!==this.props.value&&this.search(e)}render(){return this.props.children||null}}o(i,"defaultProps",{resourceName:"TypeaheadResource"})},vxan:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("q1tI"),a=n("mvLR");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t,n;return n=t=class extends r.Component{constructor(...e){super(...e),o(this,"makeCancelablePromise",(e,t)=>{if(t){const e=this.cancelCallbackMap[t];e&&(e(),delete this.cancelCallbackMap[t])}const{cancel:n,promise:r}=Object(a.a)(e);return t?this.cancelCallbackMap[t]=n:this.cancelCallbacks.push(n),r}),o(this,"cancelCallbacks",[]),o(this,"cancelCallbackMap",{})}componentWillUnmount(){[...Object.keys(this.cancelCallbackMap).map(e=>this.cancelCallbackMap[e]),...this.cancelCallbacks].forEach(e=>e()),this.cancelCallbacks=[],this.cancelCallbackMap={}}render(){return r.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}},o(t,"displayName",`WithPromiseCancellation(${e.displayName||e.name})`),n}}}]);
//# sourceMappingURL=pjs-PinBetterSaveCommon-48c63c942e6ba81106e4.mjs.map
